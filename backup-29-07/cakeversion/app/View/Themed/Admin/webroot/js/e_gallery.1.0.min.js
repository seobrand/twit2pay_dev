/*
 * ************************************************************* *
 * Name       : eGallery                                         *
 * Date       : December 2011                                    *
 * Owner      : CreativeMilk                                     *
 * Url        : www.creativemilk.net                             *
 * Version    : 1.0                                              *
 * Updated    : --/--/----                                       *
 * Developer  : Mark                                             *
 * Dependency : jQueryUI core                                    *
 * Lib        : jQuery 1.4+                                      *
 * Licence    : NOT free                                         *
 * http://themeforest.net/item/elite-a-powerfull-responsive-admin-theme/2997200
 * ************************************************************* *
 */
 
;(function(a,b,c,d){a.fn.eGallery=function(d){d=a.extend({},a.fn.eGallery.options,d);return this.each(function(){function o(b){b.fadeOut(function(){var c=a("ul",i);b.find(".btn-delete, .btn-lightbox").hide().end().addClass("in-bin").attr("style","");if(b.find(".btn-undo").length<1){b.append('<a href="javascript:void(0);" class="btn-undo">Undo</a>').appendTo(c).fadeIn()}else{b.appendTo(c).fadeIn()}})}function p(a){a.fadeOut(function(){a.removeClass("in-bin").find(".btn-undo").remove().end().find(".btn-delete, .btn-lightbox, img").show();a.appendTo(g).fadeIn()});m.find(".active").removeClass(d.activeClass).end().find("a:first").addClass(d.activeClass);h.fadeTo(100,1);if(f.find(l).find("li").length<2){f.find(l).delay(400).slideUp(200)}}if(d.clearTrash===true){var e='<div style="min-height:8.5em">'+'<span class="e-gallery-emptybin"></span>'+"<ul></ul>"+"<div><span>"+d.labelTrash+'</span><a href="javascript:void(0);" class="emptybin">'+d.labelButton+"</a></div>"+"</div>"}else{var e='<div style="min-height:5.5em">'+'<span class="e-gallery-emptybin"></span>'+"<ul></ul>"+"</div>"}a(".e-gallery-trashbin").append(e);var f=a(this);var g=f.children("ul");var h=g.children("li");var i=f.find(".e-gallery-trashbin").children("div");var j=i.children("ul");var k=f.find("header");var l=".e-gallery-trashbin";var m=f.find(".e-gallery-filter");if("ontouchstart"in b||b.DocumentTouch&&c instanceof DocumentTouch){var n="click tap"}else{var n="click"}if(d.draggable===true){h.find("div").css({cursor:"move"});h.draggable({cancel:".btn-undo, .btn-delete, .btn-lightbox",revert:"invalid",helper:"clone",cursor:"move",opacity:.8,start:function(a,b){f.find(l).show()},stop:function(a,b){setTimeout(function(){if(f.find(l).find("li").length>0){f.find(l).show(200)}else{f.find(l).slideUp(200)}},500)}})}i.droppable({accept:h,activeClass:"ui-state-highlight",drop:function(a,b){o(b.draggable)}});g.droppable({accept:".e-gallery-trashbin li",activeClass:"e-gallery-state-active",cancel:".button-icon",drop:function(a,b){p(b.draggable)}});if(d.clearTrash===true){f.on(n,".emptybin",function(b){a(this).parents(f).find(l).find("li").fadeOut(200,function(){a(this).remove();f.find(l).slideUp(200,function(b){a(this).children().fadeOut()})});b.preventDefault()})}else{f.find(".emptybin").hide()}f.on(n,".btn-delete",function(b){a(this).parents(f).find(l).slideDown(200)});f.on(n,".btn-delete",function(b){o(a(this).parents("li"));b.preventDefault()});f.on(n,".btn-undo",function(b){p(a(this).parents("li"));b.preventDefault()});f.find(m).on(n,"a",function(b){a(this).parents("ul").find("."+d.activeClass).removeClass(d.activeClass);a(this).addClass(d.activeClass);var c=a(this).attr("href").slice(1);if(c=="all"){a("*",h).fadeTo(200,1)}else{h.each(function(){if(!a(this).hasClass("in-bin")){var b=a(this).data("gallery-filter");if(b==c){a("*",this).fadeTo(200,1)}else{a("*",this).fadeTo(200,d.opacityFilter)}}})}b.preventDefault()})})};a.fn.eGallery.options={draggable:true,clearTrash:true,opacityFilter:.3,activeClass:"active",labelButton:"Empty",labelTrash:"Dragg to delete"}})(jQuery,window,document)